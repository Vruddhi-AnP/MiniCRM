<%- include("../layout", {
  body: `
    <!-- PAGE HEADER -->
    <div class="mb-4">
      <h2>Tasks</h2>
      <p class="text-muted mb-0">
        Track and manage all tasks across clients
      </p>
    </div>

    <!-- SEARCH TASK -->
    <form method="GET" action="/tasks" class="mb-3">
      <input
        type="text"
        name="q"
        value="${searchQuery || ""}"
        placeholder="Search tasks by title..."
        class="form-control w-25"
      />
    </form>

    <!-- TASKS TABLE -->
    <div class="card shadow-sm">
      <div class="card-body p-0">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th style="width:80px;">ID</th>
              <th>Title</th>
              <th>Client</th>
              <th>Assigned To</th>
              <th>Due Date</th>
              <th style="width:160px;">Status</th>
            </tr>
          </thead>

          <tbody>
            ${
              tasks.length === 0
                ? `<tr>
                    <td colspan="6" class="text-center text-muted py-4">
                      No tasks found
                    </td>
                  </tr>`
                : tasks.map(task => `
                    <tr>
                      <td>${task.id}</td>
                      <td>${task.title}</td>
                      <td>${task.client_name || "-"}</td>
                      <td>${task.assigned_to || "-"}</td>
                      <td>${task.due_date || "-"}</td>
                      <td>
                        <span class="badge ${
                          task.status === "done"
                            ? "bg-success"
                            : task.status === "in_progress"
                            ? "bg-warning text-dark"
                            : "bg-secondary"
                        } text-capitalize">
                          ${task.status.replace("_", " ")}
                        </span>
                      </td>
                    </tr>
                  `).join("")
            }
          </tbody>
        </table>
      </div>
    </div>
  `
}) %>
