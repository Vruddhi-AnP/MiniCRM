<%- include("../layout", {
  body: `
    <div class="mb-4">
      <h2>Invoices</h2>
      <p class="text-muted mb-0">
        Track payments and invoice status
      </p>
    </div>

    <!-- SEARCH INVOICE -->
    <form method="GET" action="/invoices" class="mb-3">
      <input
        type="text"
        name="q"
        value="${searchQuery || ""}"
        placeholder="Search by invoice no or client..."
        class="form-control w-25"
      />
    </form>

    <div class="card shadow-sm">
      <div class="card-body p-0">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th style="width:80px;">ID</th>
              <th>Invoice No</th>
              <th>Client</th>
              <th>Amount</th>
              <th style="width:160px;">Status</th>
            </tr>
          </thead>

          <tbody>
            ${
              invoices.length === 0
                ? `<tr>
                    <td colspan="5" class="text-center text-muted py-4">
                      No invoices found
                    </td>
                  </tr>`
                : invoices.map(inv => `
                    <tr>
                      <td>${inv.id}</td>
                      <td>${inv.invoice_number || inv.id}</td>
                      <td>${inv.client_name || "-"}</td>
                      <td><b>â‚¹${inv.amount}</b></td>
                      <td>
                        <span class="badge ${
                          inv.status === "paid"
                            ? "bg-success"
                            : inv.status === "overdue"
                            ? "bg-danger"
                            : "bg-warning text-dark"
                        } text-capitalize">
                          ${inv.status}
                        </span>
                      </td>
                    </tr>
                  `).join("")
            }
          </tbody>
        </table>
      </div>
    </div>
  `
}) %>
