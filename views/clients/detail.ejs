<!DOCTYPE html>
<html>
<head>
  <title>Client Detail</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container my-4">

  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-danger mb-0">Client Details</h2>
    <a href="/clients" class="btn btn-outline-secondary btn-sm">← Back</a>
  </div>

  <!-- Client Info -->
  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <h4 class="mb-3"><%= client.name %></h4>

      <div class="row">
        <div class="col-md-6">
          <p><b>Company:</b> <%= client.company || "-" %></p>
          <p><b>Email:</b> <%= client.email || "-" %></p>
        </div>
        <div class="col-md-6">
          <p><b>Phone:</b> <%= client.phone || "-" %></p>
          <p>
            <b>Status:</b>
            <span class="badge bg-success text-capitalize">
              <%= client.status %>
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ QUICK ACTION BUTTONS (NEW TASK + NEW INVOICE) -->
  <div class="d-flex gap-2 mb-4">
    <a href="/clients/<%= client.id %>/tasks/new" class="btn btn-outline-primary">
      + Add Task
    </a>
    <a href="/clients/<%= client.id %>/invoices/new" class="btn btn-outline-success">
      + Add Invoice
    </a>
  </div>

  <!-- Contacts -->
  <div class="card shadow-sm mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <b>Contacts</b>
      <a href="/clients/<%= client.id %>/contacts/new"
         class="btn btn-sm btn-primary">+ Add</a>
    </div>
    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <tr>
          <th>Name</th>
          <th>Email</th>
        </tr>
        <% contacts.forEach(c => { %>
          <tr>
            <td><%= c.name %></td>
            <td><%= c.email %></td>
          </tr>
        <% }) %>
      </table>
    </div>
  </div>

  <!-- Tasks -->
  <div class="card shadow-sm mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <b>Tasks</b>
      <a href="/clients/<%= client.id %>/tasks/new"
         class="btn btn-sm btn-primary">+ Add</a>
    </div>
    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <tr>
          <th>Title</th>
          <th>Status</th>
        </tr>
        <% tasks.forEach(t => { %>
          <tr>
            <td><%= t.title %></td>
            <td>
              <span class="badge bg-warning text-dark text-capitalize">
                <%= t.status.replace("_", " ") %>
              </span>
            </td>
          </tr>
        <% }) %>
      </table>
    </div>
  </div>

  <!-- Invoices -->
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <b>Invoices</b>
      <a href="/clients/<%= client.id %>/invoices/new"
         class="btn btn-sm btn-primary">+ Add</a>
    </div>

    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <tr>
          <th>Amount</th>
          <th>Status</th>
        </tr>

        <% invoices.forEach(i => { %>
          <tr>
            <td>₹<%= i.amount %></td>
            <td>
              <span class="badge 
                <%= i.status === "paid" ? "bg-success" : "bg-warning text-dark" %>">
                <%= i.status %>
              </span>
            </td>
          </tr>
        <% }) %>

      </table>
    </div>
  </div>

</div>
</body>
</html>
