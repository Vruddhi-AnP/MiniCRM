<!DOCTYPE html>
<html>
<head>
  <title>
    <%= (typeof isEdit !== "undefined" && isEdit) ? "Edit Contact" : "Add Contact" %>
  </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container my-5" style="max-width: 600px;">
  <h3 class="mb-4">
    <%= (typeof isEdit !== "undefined" && isEdit) ? "Edit Contact" : "Add Contact" %>
  </h3>

  <form
    action="<%= (typeof isEdit !== "undefined" && isEdit)
      ? '/clients/' + clientId + '/contacts/' + contact.id + '/edit'
      : '/clients/' + clientId + '/contacts/new'
    %>"
    method="POST"
    class="card p-4 shadow-sm"
  >

    <div class="mb-3">
      <label class="form-label">Name</label>
      <input
        type="text"
        name="name"
        class="form-control"
        value="<%= contact ? contact.name : '' %>"
        required
      >
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input
        type="email"
        name="email"
        class="form-control"
        value="<%= contact ? contact.email : '' %>"
      >
    </div>

    <div class="mb-3">
      <label class="form-label">Phone</label>
      <input
        type="text"
        name="phone"
        class="form-control"
        value="<%= contact ? contact.phone : '' %>"
      >
    </div>

    <div class="mb-3">
      <label class="form-label">Role</label>
      <select name="role" class="form-select">
        <option value="">Select role</option>
        <option value="Primary" <%= contact && contact.role === "Primary" ? "selected" : "" %>>Primary</option>
        <option value="Billing" <%= contact && contact.role === "Billing" ? "selected" : "" %>>Billing</option>
        <option value="Technical" <%= contact && contact.role === "Technical" ? "selected" : "" %>>Technical</option>
        <option value="Other" <%= contact && contact.role === "Other" ? "selected" : "" %>>Other</option>
      </select>
    </div>

    <div class="mb-4">
      <label class="form-label">Notes</label>
      <textarea
        name="notes"
        class="form-control"
        rows="3"
        placeholder="Any additional information..."
      ><%= contact ? contact.notes : "" %></textarea>
    </div>

    <div class="d-flex justify-content-end">
      <button type="submit" class="btn btn-primary me-2">
        <%= (typeof isEdit !== "undefined" && isEdit) ? "Update Contact" : "Save Contact" %>
      </button>
      <a href="/clients/<%= clientId %>" class="btn btn-light">
        Cancel
      </a>
    </div>

  </form>
</div>

</body>
</html>
